{% extends 'base.html' %}
{% block content %}
<div class="title-container">
    <h1 class="page-title">{{ session['user'] }}</h1>
</div>
<section class="main-container">
    <div class="page-option-container">
        <div class="page-option" onclick="tabDisplay('posts')">Posts</div>
        <div class="page-option-middle" onclick="tabDisplay('comments')">Comments</div>
        <div class="page-option" onclick="tabDisplay('plussed')">Plusses</div>
    </div>
    <div class="user-post-container">
        {% if userPosts|length > 0 %}
            <div class="card-container">
                {% for post in userPosts %}
                    <div class=" post-card card">
                        <div class="card-body row">
                            <div class="col-12 col-md-2 {{ post.topic_name }}-sidebar sidebar">
                                <div class="post-votes row">
                                    <i class="col-12 fas fa-plus"></i>
                                    <p class="col-12 post-pluses">{{ post.pluses }}</p>
                                </div>
                                <div class="post-comments row">
                                    <i class="col-12 fas fa-comments"></i>
                                    <p class="col-12 post-pluses">Engage</p>
                                </div>
                            </div>
                            <div class="post-details col col-md-10">
                                <h4 class="{{ post.topic_name }} post-topic">{{ post.topic_name }}</h4>
                                <h3 class="post-title">{{ post.post_title }}</h3>
                                <h5 class="post-author mb-2 text-muted">{{ post.author }}</h5>
                                <p class="post-text">{{ post.post_content }}</p>
                                <p class="post-date">{{ post.post_date }}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
    <div class="user-comment-container">
        {% for post in userComments %}
            <div class="profile-comment-card">
                <div class="comment-post-link">
                    <a class="unstyled-button comment-link-icon" href="{{ url_for('get_posts', _anchor=post._id) }}"><i class="fas fa-arrow-circle-left"></i></a>
                    <h4 class="comment-link-text">View Post</h4>
                </div>
                <div class="profile-comment-container">
                    <h4 class="comment-post-title">{{ post.post_title }}</h4>
                    {% for comment in post.comments %}
                        {% if comment.author==session["user"] %}
                        <hr class="comment-divider">
                        <div class="comment-content-container">
                            <p class="comment-content">{{ comment.comment_content }}</p>
                            <h3 class="post-comment-date">{{ comment.post_date }}</h3>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
</section>

{% endblock %}
